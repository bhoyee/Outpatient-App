@model Outpatient_App.Models.Patient

@{
    ViewData["Title"] = "Book Appointment";
}

<div class="kiosk-container">
    <h2>Book Appointment</h2>


    <div class="row">
        <div class="col-md-12">
            <p class="note-label">NOTE:</p>
            <p class="important-info">This appointment booking is for the next day, which is @(DateTime.Now.AddDays(1).ToString("dddd, MMMM d, yyyy")).</p>
        </div>
    </div>

    <div class="text-danger">
        @Html.ValidationSummary()
    </div>

    <style>
        .selected {
            color: red;
        }
    </style>

    <!-- Step 1: Month Selection -->
    <div class="month-selection step step-1">
        <h2>Select the Month You Were Born</h2>
        <div class="btn-group d-flex flex-wrap">
            @for (int month = 1; month <= 12; month++)
            {
                DateTime monthDate = new DateTime(DateTime.Now.Year, month, 1);
                string monthName = monthDate.ToString("MMMM");
                int daysInMonth = month == 2 && DateTime.IsLeapYear(DateTime.Now.Year) ? 29 : DateTime.DaysInMonth(DateTime.Now.Year, month);
                <button class="btn btn-info month-button m-2" onclick="selectMonth(@month, @daysInMonth)">@monthName</button>
            }
        </div>
    </div>

    <!-- Step 2: Day Selection -->
    <div class="day-selection" style="display: none; step step-2">
        <h2>Select the Day You Were Born</h2>
        <div class="btn-group d-flex flex-wrap" id="daysContainer">
        </div>
    </div>

    <!-- Step 3: Year of Birth Input -->
    <div class="year-input" style="display: none; step step-3">
        <h2>Enter the Year You Were Born</h2>
        <input type="text" id="yearInput" class="form-control mb-3" readonly maxlength="4" />
        <div class="btn-group d-flex flex-wrap">
            @for (int i = 0; i <= 9; i++)
            {
                <button class="btn btn-info m-2" onclick="addToYear(@i)">@i</button>
                if (i % 3 == 2)
                {
                    @:</div><div class="btn-group d-flex flex-wrap">
                }
            }
            <button class="btn btn-danger m-2" onclick="clearYearInput()">Clear</button>
        </div>
    </div>

    <!-- Step 4: First Letter of Surname Selection -->
    <div class="surname-selection" style="display: none; step step-4">
        <h2>Select the First Letter of Your Surname</h2>
        <div class="btn-group d-flex flex-wrap">
            @for (char letter = 'A'; letter <= 'Z'; letter++)
            {
    <button class="btn btn-info surname-button m-2" onclick="selectSurnameLetter('@letter')">@(letter)</button>
            }
        </div>
        <input type="text" id="surnameInput" class="form-control mb-3" readonly hidden />
    </div>



    <!-- Step 5: Postcode Entry -->

    <div class="postcode-entry" style="display: none; step step-5">
        <h2>Enter Your Postcode</h2>

        <input type="text" id="postcodeInput" name="postcode" class="form-control mb-3" maxlength="6" />

        <div class="btn-group d-flex flex-wrap">
            <div class="btn-group d-flex flex-wrap">
                @for (char letter = 'A'; letter <= 'Z'; letter++)
                {
                    <button class="btn btn-info letter-button m-2" onclick="enterLetter('@letter')">@letter</button>
                }
            </div>
            <div class="btn-group d-flex flex-wrap">
                @for (char digit = '0'; digit <= '9'; digit++)
                {
                    <button class="btn btn-info digit-button m-2" onclick="enterDigit('@digit')">@digit</button>
                }
                <button class="btn btn-danger m-2" onclick="clearPostcodeInput()">Clear</button>
            </div>
        </div>
    </div>


    <!-- Step 6: Appointment Summary -->
    <div class="appointment-summary" style="display: none; step step-6">
        <h2>Appointment Summary</h2>
        <p>Date of Birth: <span id="summaryDateOfBirth"></span></p>
        <p>First Letter of Surname: <span id="summarySurname"></span></p>
        <p>Postcode: <span id="summaryPostcode"></span></p>
       @* <button class="btn btn-secondary" onclick="goBack()">Back</button>*@
        <button class="btn btn-primary mt-5  btn-lg" onclick="bookNow()">Book Now</button>

        <!-- Pre-loading animation -->
        <div id="loading" class="text-center" style="display:none;">
            <img src="~/img/preloading_image.gif" alt="Loading..." />
            <p>Loading...</p>
        </div>

    </div>




    
    <!-- Back Button -->
    <button class="btn btn-secondary mb-3 mt-5 back-button  btn-lg" style="display: none;" onclick="goBack()">Back</button>


    <!-- Step 7: Appointment Result - Success -->
    <div class="appointment-success" style="display: none;">
        <h2>Appointment Booked Successfully</h2>
        <p>Your appointment has been booked successfully.</p>

          <button class="btn btn-primary mt-5  btn-lg" onclick="goHome()">Home</button>
    </div>

    <!-- Step 8: Appointment Result - Failure -->
    <div class="appointment-failure" style="display: none;">
        <h2>Failed to Book Appointment</h2>
        <p>Sorry, we were unable to book your appointment at this time. Please try again later.</p>

          <button class="btn btn-primary mt-5  btn-lg" onclick="goHome()">Home</button>
    </div>

    <!-- Step 9: Duplicate Appointment -->
    <div class="appointment-duplicate" style="display: none;">
        <h2>Duplicate Appointment</h2>
        <p>Sorry, you already have an appointment booked for tommorrow.</p>
            <h3 class="mb-5">Thank you !!!</h3>
        <button class="btn btn-primary mt-5  btn-lg" onclick="goHome()">Home</button>
    </div>



    <!-- Final Submit Button -->
    <button type="submit" class="btn btn-primary" id="finalSubmitButton" style="display: none;">Book Appointment</button>
 
@*    <div id="errorMessage" class="text-danger"></div>
*@


</div>
